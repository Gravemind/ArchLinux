# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!
#
# Jordan Galby's i3wm v4 config file
#

# Variables
set $ModK           Mod4
set $resize_step    100
set $screenR        DVI-I-1
set $screenL        DVI-D-0

set $layouts ~/.i3/layouts

ipc-socket ~/.i3/ipc.sock

# Font for window titles. ISO 10646 = Unicode
#font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
font pango:DejaVu Sans Mono Bold 9

# use Mouse+ModK to drag floating windows to their wanted position
floating_modifier $ModK

# Start a terminal
bindsym $ModK+Return exec /usr/bin/urxvt

# Start emacs
bindsym $ModK+Shift+Return exec ~/bin/ne
bindsym $ModK+Ctrl+Return exec ~/bin/ne ~/TODO.org
#bindsym $ModK+Shift+Return exec ~/bin/emacscl main
#bindsym $ModK+Ctrl+Return exec ~/bin/emacscl main ~/TODO.org
#bindsym $ModK+F1 exec ~/bin/emacscl one
#bindsym $ModK+F2 exec ~/bin/emacscl two
#bindsym $ModK+F3 exec ~/bin/emacscl three
#bindsym $ModK+F4 exec ~/bin/emacscl four

# Spawn with layout
#bindsym $ModK+F6 exec $layouts/rtags.zsh 6
#bindsym $ModK+F9 exec $layouts/pidgin.zsh 9
bindsym $ModK+F10 exec $layouts/firefox.zsh 10

bindsym $ModK+F5 exec qalculate

# Toggle border decoration
bindsym $ModK+e border toggle

# Kill focused window
bindsym $ModK+q kill

# Start dmenu
bindsym $ModK+z exec dmenu_run -b -p ">>" -nb '#222222' -nf '#CCCCCC' -sb '#4c7899' -sf '#FFFFFF'

# Move to scrathpad
bind $ModK+Shift+49 move scratchpad
# Toggle scratchpad
bind $ModK+49 scratchpad show

# Change focus
bindsym $ModK+h     focus left
bindsym $ModK+j     focus down
bindsym $ModK+k     focus up
bindsym $ModK+l     focus right
bindsym $ModK+Left  focus left
bindsym $ModK+Down  focus down
bindsym $ModK+Up    focus up
bindsym $ModK+Right focus right

# Go to urgent window, and go back
bindsym $ModK+BackSpace exec --no-startup-id ~/.i3/goto_urgent_and_back.sh

# delay the reset of urgent hint workspace focus
force_display_urgency_hint 1000 ms

# Change focus output
# bindsym $ModK+Mod1+h     focus container left
# bindsym $ModK+Mod1+j     focus container down
# bindsym $ModK+Mod1+k     focus container up
# bindsym $ModK+Mod1+l     focus container right
# bindsym $ModK+Mod1+Left  focus container left
# bindsym $ModK+Mod1+Down  focus container down
# bindsym $ModK+Mod1+Up    focus container up
# bindsym $ModK+Mod1+Right focus container right

# Focus other output (when multi screen)
bindsym $ModK+Tab        focus output right

# Move focused window
bindsym $ModK+Shift+h     move left
bindsym $ModK+Shift+j     move down
bindsym $ModK+Shift+k     move up
bindsym $ModK+Shift+l     move right
bindsym $ModK+Shift+Left  move left
bindsym $ModK+Shift+Down  move down
bindsym $ModK+Shift+Up    move up
bindsym $ModK+Shift+Right move right

# Split in vertical orientation
bindsym $ModK+v split v

# Split in horizontal orientation
bindsym $ModK+b split h

# Focus the parent container
bindsym $ModK+x focus parent

# Focus the child container
bindsym $ModK+c focus child

# Change container layout
bindsym $ModK+a layout tabbed
bindsym $ModK+s layout stacking
bindsym $ModK+d layout toggle split

# Enter fullscreen mode for the focused container
bindsym $ModK+f fullscreen

# Toggle tiling / floating
bindsym $ModK+Shift+space floating toggle

# Change focus between tiling / floating windows
bindsym $ModK+space focus mode_toggle

# Reload the configuration file
bindsym $ModK+Shift+w reload
# Exit i3 (logs you out of your X session)
bindsym $ModK+Shift+e exit
# Restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $ModK+Shift+r restart

# Resize window (you can also use the mouse for that)
mode "resize" {
    bindsym h           resize shrink left  $resize_step px
    bindsym Shift+h     resize grow   left  $resize_step px
    bindsym j           resize shrink down  $resize_step px
    bindsym Shift+j     resize grow   down  $resize_step px
    bindsym k           resize shrink up    $resize_step px
    bindsym Shift+k     resize grow   up    $resize_step px
    bindsym l           resize shrink right $resize_step px
    bindsym Shift+l     resize grow   right $resize_step px
    
    bindsym Left        resize shrink left  $resize_step px
    bindsym Shift+Left  resize grow   left  $resize_step px
    bindsym Down        resize shrink down  $resize_step px
    bindsym Shift+Down  resize grow   down  $resize_step px
    bindsym Up          resize shrink up    $resize_step px
    bindsym Shift+Up    resize grow   up    $resize_step px
    bindsym Right       resize shrink right $resize_step px
    bindsym Shift+Right resize grow   right $resize_step px
    
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $ModK+r mode "resize"

# Colors
# class                 border  backgr. text    indicator
client.focused          #000000 #285577 #dddddd #0099ff
client.focused_inactive #000000 #333333 #888888 #484e50
client.unfocused        #000000 #000000 #555555 #292d2e
client.urgent           #2f343a #900000 #ffffff #900000

# Def
# client.focused          #4c7899 #285577 #ffffff #2e9ef4
# client.focused_inactive #333333 #5f676a #ffffff #484e50
# client.unfocused        #333333 #222222 #888888 #292d2e
# client.urgent           #2f343a #900000 #ffffff #900000

# Switch to workspace
bindsym $ModK+1 workspace 1
bindsym $ModK+2 workspace 2
bindsym $ModK+3 workspace 3
bindsym $ModK+4 workspace 4
bindsym $ModK+5 workspace 5
bindsym $ModK+6 workspace 6
bindsym $ModK+7 workspace 7
bindsym $ModK+8 workspace 8
bindsym $ModK+9 workspace 9
bindsym $ModK+0 workspace 10

# Move focused container to workspace
bindsym $ModK+Shift+1 move workspace 1
bindsym $ModK+Shift+2 move workspace 2
bindsym $ModK+Shift+3 move workspace 3
bindsym $ModK+Shift+4 move workspace 4
bindsym $ModK+Shift+5 move workspace 5
bindsym $ModK+Shift+6 move workspace 6
bindsym $ModK+Shift+7 move workspace 7
bindsym $ModK+Shift+8 move workspace 8
bindsym $ModK+Shift+9 move workspace 9
bindsym $ModK+Shift+0 move workspace 10

workspace 1 output $screenL
workspace 2 output $screenL
workspace 3 output $screenL
workspace 4 output $screenL
workspace 5 output $screenL
workspace 6 output $screenR
workspace 7 output $screenR
workspace 8 output $screenR
workspace 9 output $screenR
workspace 10 output $screenR

assign [window_role="^browser$"] → 10
assign [class="^Pidgin$"] → 9
# assign [class="^Gimp$"] → 5
# assign [class="^Ekiga$"] → 4
# assign [class="(?i)^.*sflphone.*$"] → 4
#for_window [class="(?i)^.*wine.*$"] floating enable
assign [class="(?i)^.*steam.*$"] → 1

# for_window [class="(?i)^.*hl2.*$"] floating enable

for_window [class="(?i)urxvt"] border pixel 2
for_window [class="(?i)emacs"] border pixel 2
for_window [class="(?i)firefox"] border none
for_window [class="(?i)mplayer"] border none
for_window [class="(?i)mpv"] border none

focus_follows_mouse yes
new_window normal
default_orientation auto
workspace_auto_back_and_forth no
hide_edge_borders none
#mouse_warping output

# Lock
#bindsym $ModK+w exec --no-startup-id "/bin/bash --login -c 'sleep 0.5; xtrlock; exit 0'"
bindsym $ModK+w exec --no-startup-id i3lock -c 222222


# Pulse Audio
set $pactl_vol pactl set-sink-volume 1
set $pactl_mute pactl set-sink-mute 1 toggle
#bindsym $ModK+= exec --no-startup-id $pactl_vol +2%
#bindsym $ModK+- exec --no-startup-id $pactl_vol -2%
bind $ModK+21 exec --no-startup-id $pactl_vol +2%
bind $ModK+20 exec --no-startup-id $pactl_vol -2%
bindsym XF86AudioRaiseVolume exec --no-startup-id $pactl_vol +1%
bindsym XF86AudioLowerVolume exec --no-startup-id $pactl_vol -1%
bindsym $ModK+XF86AudioRaiseVolume exec --no-startup-id $pactl_vol +1%
bindsym $ModK+XF86AudioLowerVolume exec --no-startup-id $pactl_vol -1%
bindsym $ModK+F12 exec --no-startup-id $pactl_vol +2%
bindsym $ModK+F11 exec --no-startup-id $pactl_vol -2%
bindsym XF86AudioMute exec --no-startup-id $pactl_mute
bindsym $ModK+XF86AudioMute exec --no-startup-id $pactl_mute

# Alsa
# set $amixer ~/bin/amixerlocked -c 0
# #set $amixer amixer
# set $amixer_item Master
# bind $ModK+20 exec --no-startup-id $amixer sset $amixer_item 2%-
# bind $ModK+21 exec --no-startup-id $amixer sset $amixer_item 2%+
# bindsym XF86AudioLowerVolume exec --no-startup-id $amixer sset $amixer_item 1%-
# bindsym XF86AudioRaiseVolume exec --no-startup-id $amixer sset $amixer_item 1%+
# bindsym $ModK+XF86AudioLowerVolume exec --no-startup-id $amixer sset $amixer_item 1%-
# bindsym $ModK+XF86AudioRaiseVolume exec --no-startup-id $amixer sset $amixer_item 1%+
# bindsym XF86AudioMute exec --no-startup-id $amixer sset $amixer_item toggle
# bindsym $ModK+XF86AudioMute exec --no-startup-id $amixer sset $amixer_item toggle
# bind $ModK+95 exec --no-startup-id $amixer sset $amixer_item 2%-
# bind $ModK+96 exec --no-startup-id $amixer sset $amixer_item 2%+

# Cmus
# bindsym $ModK+End exec --no-startup-id cmus-remote -u
# bindsym $ModK+Prior exec --no-startup-id cmus-remote -r
# bindsym $ModK+Next exec --no-startup-id cmus-remote -n
# bindsym XF86AudioPlay exec --no-startup-id cmus-remote -u #play/pause
# bindsym XF86AudioPrev exec --no-startup-id cmus-remote -r #prev
# bindsym XF86AudioNext exec --no-startup-id cmus-remote -n #next
# bind $ModK+75 exec --no-startup-id cmus-remote -u
# bind $ModK+74 exec --no-startup-id cmus-remote -r
# bind $ModK+76 exec --no-startup-id cmus-remote -n


# player ctl
# bindsym $ModK+End exec --no-startup-id playerctl play-pause
# bindsym $ModK+Prior exec --no-startup-id playerctl previous
# bindsym $ModK+Next exec --no-startup-id playerctl next
# bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
# bindsym XF86AudioPrev exec --no-startup-id playerctl previous
# bindsym XF86AudioNext exec --no-startup-id playerctl next
# bindsym XF86AudioStop exec --no-startup-id playerctl pause
# bindsym $ModK+XF86AudioPlay exec --no-startup-id playerctl play-pause
# bindsym $ModK+XF86AudioPrev exec --no-startup-id playerctl previous
# bindsym $ModK+XF86AudioNext exec --no-startup-id playerctl next
# bindsym $ModK+XF86AudioStop exec --no-startup-id playerctl pause
# # bindsym $ModK+F8 exec --no-startup-id playerctl play-pause
# # bindsym $ModK+F9 exec --no-startup-id playerctl previous
# # bindsym $ModK+F10 exec --no-startup-id playerctl next

# # MPD
bindsym $ModK+End exec --no-startup-id mpc -q toggle
bindsym $ModK+Prior exec --no-startup-id mpc -q prev
bindsym $ModK+Next exec --no-startup-id mpc -q next
bindsym XF86AudioPlay exec --no-startup-id mpc -q toggle
bindsym XF86AudioPrev exec --no-startup-id mpc -q prev
bindsym XF86AudioNext exec --no-startup-id mpc -q next
bindsym XF86AudioStop exec --no-startup-id mpc -q stop
bindsym $ModK+XF86AudioPlay exec --no-startup-id mpc -q toggle
bindsym $ModK+XF86AudioPrev exec --no-startup-id mpc -q prev
bindsym $ModK+XF86AudioNext exec --no-startup-id mpc -q next
bindsym $ModK+XF86AudioStop exec --no-startup-id mpc -q stop
# bindsym $ModK+F8 exec --no-startup-id mpc -q toggle
# bindsym $ModK+F9 exec --no-startup-id mpc -q prev
# bindsym $ModK+F10 exec --no-startup-id mpc -q next

# On/Off Touchpad
bindsym XF86TouchpadToggle exec zsh ~/bin/toggletouchpad

bar {
    status_command i3status -c ~/.i3/i3status.conf
    separator_symbol "   "
    mode hide
}

#exec ~/.i3/bar/bar.py
exec ~/.i3/bg.py
# exec conky -c ~/.conky/balloon/conkyrc

#
# Spawn layouts and programs
# http://i3wm.org/docs/layout-saving.html
#
exec --no-startup-id $layouts/startup.zsh

set $hook_idle_time_min 10
# exec --no-startup-id xautolock -detectsleep -time $hook_idle_time_min -locker "~/bin/hooks/onidle" -noclose

# exec i3lock -c 222222
