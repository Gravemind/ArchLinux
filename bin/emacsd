#!/bin/bash

##
## named emacs daemon service
##
## usage: emacsserver [start|stop|restart] DAEMON_NAME
##

DAEMON_NAME="$2"
case "$1" in
	start)
		${0} stop $DAEMON_NAME
		emacs "--daemon=$DAEMON_NAME" &> /dev/null
		;;
	restart)
		${0} start $DAEMON_NAME
		;;
	stop)
		PID=`pgrep -f -- "--daemon=$DAEMON_NAME"`
		echo "$PID"
		if [[ -n "$PID" ]]
		then
			kill $PID
		fi
		;;
    list)
		for pid in $(pgrep -f -- "--daemon=")
        do
            ps -p $pid -fh
        done
        ;;
	*)
		echo "usage: $0 {start|stop|restart}"
esac
