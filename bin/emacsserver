#!/bin/zsh

DAEMON_NAME="$2"

case "$1" in
	start)
		${0} stop $DAEMON_NAME
		emacs "--daemon=$DAEMON_NAME" &> /dev/null
		;;
	restart)
		${0} start $DAEMON_NAME
		;;
	stop)
		PID=`ps ax | grep -- "--daemon=$DAEMON_NAME" | grep -v 'grep' | cut -d ' ' -f 1`
		echo "$PID"
		if [[ -n "$PID" ]]
		then
			kill $PID
		fi
		;;
	*)
		echo "usage: $0 {start|stop|restart}"  
esac

exit 0

